<!DOCTYPE HTML>

<html>

<head>
	<title>Color Glossary</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="js/colorUtils.js"></script>
	<script src="js/kdTree.js"></script>
	<script src="js/colorGlossary.js"></script>
	<script src="js/jscolor.js"></script>
</head>

<body>

	<div id="upperDiv">
    	<h2>Color Glossary</h2>
		HEX value: <input id="chosen-value" value="ffffff">
	</div>

	<div id="middleDiv">
		<hr>
	</div>

	<div id="lowerDiv">
		<div id="lowerDivLeft">
			<button id="colorPicker" class="jscolor {width:300, height:200, valueElement:'chosen-value', onFineChange:'chooseColor(\'#\' + this.toString())'}">
				Choose Color
			</button>
		</div>
	</div>

	<div id="lowerDivRight">
	</div>

	<script>
		function chooseColor(chosenColor) {
			document.getElementsByTagName("body")[0].style.backgroundColor = chosenColor;
			var nearestColors = colorProximityTree.nearest(hexToRgb(chosenColor), 5);
			var colorNameDiv = document.getElementById("lowerDivRight");
			colorNameDiv.innerHTML = "";
			for (var i = 0; i < nearestColors.length; i++) {
				var approxColorRgb = nearestColors[i][0];
				var approxColorHex = rgbToHex(approxColorRgb.r, approxColorRgb.g, approxColorRgb.b);
				var names = colorGlossary[approxColorHex];
				for (var j = 0; j < names.length; j++) {
					var div = document.createElement("div");
					div.style.height = "50px";
					div.style.width = "250px";
					div.style.margin = "4px";
					div.style.padding = "15px";
					div.style.backgroundColor = approxColorHex;
					div.hexColor = approxColorHex;
					div.style.color = readableColorForBackground(approxColorHex);
					div.innerHTML = names[j];
					div.style.border = "1px dashed " + approxColorHex;

					div.onmouseover = function() {
						this.style.border = "1px dashed " + readableColorForBackground(rgbStringToHex(this.style.backgroundColor));
					}

					div.onmouseleave = function() {
						this.style.border = "1px dashed " + rgbStringToHex(this.style.backgroundColor);
					}

					div.onclick = function() {
						document.getElementById("colorPicker").jscolor.fromString(this.style.backgroundColor);
						chooseColor(rgbStringToHex(this.style.backgroundColor));
					}
					colorNameDiv.appendChild(div);
				}
			}
		}
	</script>
</body>

</html>